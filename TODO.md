# TODO

- [x] Обзор структуры и ключевых файлов проекта
- [x] Подготовлен отчёт с улучшениями: `Analyze.md`
- [x] Имплементировать быстрые фиксы из Analyze.md (импорты, eval, SQL, зависимости)
- [x] Настроить линтеры/типизацию (ruff, mypy), тесты (pytest)
- [x] Обновить README (quickstart, docker, конфиги, опечатки)

## Выполненные задачи (2025-01-07)

### Исправлены проблемы из Analyze.md:
- [x] **Зависимости**: добавлены `requests>=2.32.0`, `icecream>=2.1.3` в pyproject.toml
- [x] **SQL-инъекции**: заменены f-строки на параметризованные запросы в sqliteutils.py
- [x] **Использование eval**: заменено на безопасный парсинг в csvdbutils.py
- [x] **Дублирование User**: исправлено дублирование класса User в csvdbutils
- [x] **Хардкод путей**: добавлен конфигурируемый `SETTINGS_DB_PATH` в конфиг
- [x] **Импорты**: исправлены неправильные импорты в _core.py для CSV
- [x] **Мёртвый код**: убраны неправильные ссылки на SettingOne/SettingTwo

### Добавлена типизация:
- [x] **Type hints**: добавлены в TlgBotCore, SettingUser (SQLite/CSV), models.py
- [x] **Ruff конфигурация**: настроен линтер и форматтер
- [x] **Mypy конфигурация**: настроена проверка типов с игнорированием плагинов/тестов
- [x] **Dev зависимости**: добавлены ruff, mypy, pytest, types-requests

### Исправлены ошибки mypy:
- [x] Union типы и Optional аннотации
- [x] Проверки None для settings
- [x] Динамические атрибуты модулей через setattr()
- [x] Unreachable код с pragma: no cover

### Обновлена документация:
- [x] **README.md**: добавлены инструкции по установке dev зависимостей
- [x] **Analyze.md**: отмечены выполненные задачи

